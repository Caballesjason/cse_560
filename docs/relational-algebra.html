<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>2 Relational Algebra | CSE 560 - Notes</title>
<meta name="author" content="Jason Caballes">
<meta name="generator" content="bookdown 0.37 with bs4_book()">
<meta property="og:title" content="2 Relational Algebra | CSE 560 - Notes">
<meta property="og:type" content="book">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="2 Relational Algebra | CSE 560 - Notes">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.6.1/transition.js"></script><script src="libs/bs3compat-0.6.1/tabs.js"></script><script src="libs/bs3compat-0.6.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/htmlwidgets-1.6.4/htmlwidgets.js"></script><script src="libs/plotly-binding-4.10.4/plotly.js"></script><script src="libs/typedarray-0.1/typedarray.min.js"></script><link href="libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">
<script src="libs/crosstalk-1.2.1/js/crosstalk.min.js"></script><link href="libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="libs/plotly-main-2.11.1/plotly-latest.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<meta name="description" content="2.1 Algebraic Query Language SQL is built upon relational Algebra and is simplified for optimization and ease of use. In relational algebra, relations are variables and finite relations are...">
<meta property="og:description" content="2.1 Algebraic Query Language SQL is built upon relational Algebra and is simplified for optimization and ease of use. In relational algebra, relations are variables and finite relations are...">
<meta name="twitter:description" content="2.1 Algebraic Query Language SQL is built upon relational Algebra and is simplified for optimization and ease of use. In relational algebra, relations are variables and finite relations are...">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">CSE 560 - Notes</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Jason’s CSE 560 Notes</a></li>
<li><a class="" href="relational-databases.html"><span class="header-section-number">1</span> Relational Databases</a></li>
<li><a class="active" href="relational-algebra.html"><span class="header-section-number">2</span> Relational Algebra</a></li>
<li><a class="" href="introducion-to-sql.html"><span class="header-section-number">3</span> Introducion to SQL</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="relational-algebra" class="section level1" number="2">
<h1>
<span class="header-section-number">2</span> Relational Algebra<a class="anchor" aria-label="anchor" href="#relational-algebra"><i class="fas fa-link"></i></a>
</h1>
<div id="algebraic-query-language" class="section level2" number="2.1">
<h2>
<span class="header-section-number">2.1</span> Algebraic Query Language<a class="anchor" aria-label="anchor" href="#algebraic-query-language"><i class="fas fa-link"></i></a>
</h2>
<p>SQL is built upon relational Algebra and is simplified for optimization and ease of use. In relational algebra, relations are variables and finite relations are constants. In other words, relations are the operands (things we apply operators to) in relational algebra.</p>
<p>When Database Management Systems (DBMS) process queries, the first thing the system does is translate the queries into relational algebra or a very similar internal representation of it.</p>
<p>We will talk about the following operations in that can be done in relational algebra:</p>
<ol style="list-style-type: decimal">
<li>
<strong>Selection <span class="math inline">\(\sigma_{C}{(R)}\)</span></strong> - This operation chooses a subset of tuples. <span class="math inline">\(C\)</span> is a set of conditions that determines which tuples are chosen and <span class="math inline">\(R\)</span> is the input of <span class="math inline">\(\sigma\)</span> that indicates which relation we want to execute the selection on.<br>
</li>
<li>
<strong>Projection <span class="math inline">\(\pi_{A_{1}, A_{2}, ...}\)</span></strong> - This operation choose a subset of columns. Each <span class="math inline">\(A_{i}\)</span> in the subscript is simply the attributes we want to project (select). In relational algebra of sets, duplicate tuples are always removed.<br>
</li>
<li>
<strong>Cartesian Products/Joins <span class="math inline">\(R \times S\)</span></strong> - This concatenates two tuples together. Conventionally, the attributes of in the left side of <span class="math inline">\(\times\)</span> are populated first.</li>
<li>
<strong>Renaming <span class="math inline">\(\rho_{S{(A_{1}, A_{2}, ..., A_{n})}}{(R)}\)</span></strong> - This changes the names of attributes or relations in the relation schema. <span class="math inline">\(R\)</span> is the relation who’s name we are trying to change, <span class="math inline">\(S\)</span> is the new name of <span class="math inline">\(R\)</span>, and <span class="math inline">\(A_{1}, A_{2},..., A_{n}\)</span> are the attribute with their corresponding new names. The attributes are listed in order of their definition in the relation’s schema. If you do not want to change some attributes, just list their current names in the subscript along with the new names of the attributes you wanted to change.</li>
</ol>
<p>When joining relations together, we typically also apply the fundamental operations from set theory:<br>
1. <strong>Unions <span class="math inline">\(R \cup S\)</span></strong> - This is the set of elements in R or S or both. If an element appears in both, it is presented only once in union<br>
2. <strong>Intersection <span class="math inline">\(R \cap S\)</span></strong> - This is the set of elements in both R and S<br>
3. <strong>Difference <span class="math inline">\(R - S\)</span> (R not in S)</strong> - This is the set of elements in R, but not in S. Note that this is different from <span class="math inline">\(S - R\)</span>, which means the set of elements in S, but not in R.</p>
<p>When applying these operations to two tables, we implement some constraints:<br>
1. R and S must have schemas with identical attributes and the domains for each attribute must be the same in R and S<br>
2. Before doing any operations, the columns in R and S must be orderd so that the order of attributes are the same for both relations. We cannot do operations on <span class="math inline">\(R = \{Int, Char\}\)</span> to <span class="math inline">\(S = \{Char, Int\}\)</span>. If attributes are identical between two relations, but they have different names, we can still apply this operations to the relations. This is because we can just rename the attributes.</p>
<p>We will now go in more depth with each operation.</p>
<p><br></p>
<p>Before we talk about the various operations in relational algebra, we will define what a clause and predicate is.</p>
<p><strong>Clause</strong>: A clause is any function or keyword in SQL that allows you to filter tuples
<strong>Predicate</strong>: A predicate is anything that returns a boolean (True, False, Unknown)</p>
<div class="float">
<img src="images/clause_graph.png" style="width:100.0%" alt="SQL Clauses"><div class="figcaption"><a href="https://www.scaler.com/topics/clause-in-sql/">SQL Clauses</a></div>
</div>
</div>
<div id="selection" class="section level2" number="2.2">
<h2>
<span class="header-section-number">2.2</span> Selection<a class="anchor" aria-label="anchor" href="#selection"><i class="fas fa-link"></i></a>
</h2>
<p><strong>Selection</strong> chooses which attributes we want in our relation. For example:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb1-1"><a href="relational-algebra.html#cb1-1" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span></span>
<span id="cb1-2"><a href="relational-algebra.html#cb1-2" tabindex="-1"></a><span class="kw">FROM</span> instructor</span></code></pre></div>
<div class="plotly html-widget html-fill-item" id="htmlwidget-085a5707fa595a3dd5e3" style="width:100%;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-085a5707fa595a3dd5e3">{"x":{"visdat":{"3ec494814d3":["function () ","plotlyVisDat"]},"cur_data":"3ec494814d3","attrs":{"3ec494814d3":{"header":{"values":["id","name","dept_name","salary"],"fill":{"color":"blue"},"font":{"color":"white"}},"cells":{"values":[["63395","McKinnon","Cybernetics",94333.990000000005],["78699","Pingr","Statistics",59303.620000000003],["96895","Mird","Marketing",119921.41],["4233","Luo","English",88791.449999999997],["4034","Murata","Athletics",61387.559999999998],["50885","Konstantinides","Languages",32570.5],["79653","Levine","Elec. Eng.",89805.830000000002],["50330","Shuming","Physics",108011.81],["80759","Queiroz","Biology",45538.32],["73623","Sullivan","Elec. Eng.",90038.089999999997],["97302","Bertolino","Mech. Eng.",51647.57],["57180","Hau","Accounting",43966.290000000001],["74420","Voronina","Physics",121141.99000000001],["35579","Soisalon-Soininen","Psychology",62579.610000000001],["31955","Moreira","Accounting",71351.419999999998],["37687","Arias","Statistics",104563.38],["6569","Mingoz","Finance",105311.38],["16807","Yazdi","Athletics",98333.649999999994],["14365","Lembr","Accounting",32241.560000000001],["90643","Choll","Statistics",57807.089999999997],["81991","Valtchev","Biology",77036.179999999993],["95030","Arinb","Statistics",54805.110000000001],["15347","Bawa","Athletics",72140.880000000005],["74426","Kenje","Marketing",106554.73],["42782","Vicentino","Elec. Eng.",34272.669999999998],["58558","Dusserre","Marketing",66143.25],["63287","Jaekel","Athletics",103146.87],["59795","Desyl","Languages",48803.379999999997],["22591","DAgostino","Psychology",59706.489999999998],["48570","Sarkar","Pol. Sci.",87549.800000000003],["79081","Ullman ","Accounting",47307.099999999999],["52647","Bancilhon","Pol. Sci.",87958.009999999995],["25946","Liley","Languages",90891.690000000002],["36897","Morris","Marketing",43770.360000000001],["72553","Yin","English",46397.589999999997],["3199","Gustafsson","Elec. Eng.",82534.369999999995],["34175","Bondi","Comp. Sci.",115469.11],["48507","Lent","Mech. Eng.",107978.47],["65931","Pimenta","Cybernetics",79866.949999999997],["3335","Bourrier","Comp. Sci.",80797.830000000002],["64871","Gutierrez","Statistics",45310.529999999999],["95709","Sakurai","English",118143.98],["43779","Romero","Astronomy",79070.080000000002],["77346","Mahmoud","Geology",99382.589999999997],["28097","Kean","English",35023.18],["90376","Bietzk","Cybernetics",117836.5],["28400","Atanassov","Statistics",84982.919999999998],["41930","Tung","Athletics",50482.029999999999],["19368","Wieland","Pol. Sci.",124651.41],["99052","Dale","Cybernetics",93348.830000000002]]},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"table"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"hovermode":"closest","showlegend":false},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"header":{"values":["id","name","dept_name","salary"],"fill":{"color":"blue"},"font":{"color":"white"}},"cells":{"values":[["63395","78699","96895","4233","4034","50885","79653","50330","80759","73623","97302","57180","74420","35579","31955","37687","6569","16807","14365","90643","81991","95030","15347","74426","42782","58558","63287","59795","22591","48570","79081","52647","25946","36897","72553","3199","34175","48507","65931","3335","64871","95709","43779","77346","28097","90376","28400","41930","19368","99052"],["McKinnon","Pingr","Mird","Luo","Murata","Konstantinides","Levine","Shuming","Queiroz","Sullivan","Bertolino","Hau","Voronina","Soisalon-Soininen","Moreira","Arias","Mingoz","Yazdi","Lembr","Choll","Valtchev","Arinb","Bawa","Kenje","Vicentino","Dusserre","Jaekel","Desyl","DAgostino","Sarkar","Ullman ","Bancilhon","Liley","Morris","Yin","Gustafsson","Bondi","Lent","Pimenta","Bourrier","Gutierrez","Sakurai","Romero","Mahmoud","Kean","Bietzk","Atanassov","Tung","Wieland","Dale"],["Cybernetics","Statistics","Marketing","English","Athletics","Languages","Elec. Eng.","Physics","Biology","Elec. Eng.","Mech. Eng.","Accounting","Physics","Psychology","Accounting","Statistics","Finance","Athletics","Accounting","Statistics","Biology","Statistics","Athletics","Marketing","Elec. Eng.","Marketing","Athletics","Languages","Psychology","Pol. Sci.","Accounting","Pol. Sci.","Languages","Marketing","English","Elec. Eng.","Comp. Sci.","Mech. Eng.","Cybernetics","Comp. Sci.","Statistics","English","Astronomy","Geology","English","Cybernetics","Statistics","Athletics","Pol. Sci.","Cybernetics"],[94333.990000000005,59303.620000000003,119921.41,88791.449999999997,61387.559999999998,32570.5,89805.830000000002,108011.81,45538.32,90038.089999999997,51647.57,43966.290000000001,121141.99000000001,62579.610000000001,71351.419999999998,104563.38,105311.38,98333.649999999994,32241.560000000001,57807.089999999997,77036.179999999993,54805.110000000001,72140.880000000005,106554.73,34272.669999999998,66143.25,103146.87,48803.379999999997,59706.489999999998,87549.800000000003,47307.099999999999,87958.009999999995,90891.690000000002,43770.360000000001,46397.589999999997,82534.369999999995,115469.11,107978.47,79866.949999999997,80797.830000000002,45310.529999999999,118143.98,79070.080000000002,99382.589999999997,35023.18,117836.5,84982.919999999998,50482.029999999999,124651.41,93348.830000000002]]},"type":"table","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script><p>The notation for selection is <span class="math inline">\(\sigma_{C}({R2})\)</span>. <span class="math inline">\(C\)</span> is the the set of conditions we may want to apply to the selection. The input <span class="math inline">\(R2\)</span> is the relation we like to pull the attributes from. When committing any operator to a relation, we usually assign expression to a new relation. For example:</p>
<p><span class="math display">\[
R1 := \sigma_{C}({R2})
\]</span></p>
<p>Here <span class="math inline">\(R1\)</span> is the new relation from the expression <span class="math inline">\(\sigma_{C}({R2})\)</span>. <span class="math inline">\(:=\)</span> is an assignment operator that assigns <span class="math inline">\(R1\)</span> to be the relation returned from <span class="math inline">\(\sigma_{C}({R2})\)</span>. When creating relations from any expression, it will have the same schema as the inputted relation. To put our expression in English, we are selecting all tuples. We are not using any conditions to exclude tuples!</p>
</div>
<div id="projection" class="section level2" number="2.3">
<h2>
<span class="header-section-number">2.3</span> Projection<a class="anchor" aria-label="anchor" href="#projection"><i class="fas fa-link"></i></a>
</h2>
<p><strong>Projection</strong> selects a subset of attributes from a relation. The order of attributes must be specified or the order of the relation from the schema is returned. Any duplicates are eliminated.</p>
<p><span class="math display">\[
R1 := \pi_{L}({R2}) \\ \text{L - List of attributes from R2} \\ \text{In English - R1 is the the attributes "L" from R2}
\]</span></p>
<div class="sourceCode" id="cb2"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb2-1"><a href="relational-algebra.html#cb2-1" tabindex="-1"></a><span class="kw">SELECT</span> name</span>
<span id="cb2-2"><a href="relational-algebra.html#cb2-2" tabindex="-1"></a>  ,dept_name</span>
<span id="cb2-3"><a href="relational-algebra.html#cb2-3" tabindex="-1"></a>  ,salary</span>
<span id="cb2-4"><a href="relational-algebra.html#cb2-4" tabindex="-1"></a><span class="kw">FROM</span> instructor</span></code></pre></div>
<div class="plotly html-widget html-fill-item" id="htmlwidget-102954d5863aef519a47" style="width:100%;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-102954d5863aef519a47">{"x":{"visdat":{"3ec7399117e":["function () ","plotlyVisDat"]},"cur_data":"3ec7399117e","attrs":{"3ec7399117e":{"header":{"values":["name","dept_name","salary"],"fill":{"color":"blue"},"font":{"color":"white"}},"cells":{"values":[["McKinnon","Cybernetics",94333.990000000005],["Pingr","Statistics",59303.620000000003],["Mird","Marketing",119921.41],["Luo","English",88791.449999999997],["Murata","Athletics",61387.559999999998],["Konstantinides","Languages",32570.5],["Levine","Elec. Eng.",89805.830000000002],["Shuming","Physics",108011.81],["Queiroz","Biology",45538.32],["Sullivan","Elec. Eng.",90038.089999999997],["Bertolino","Mech. Eng.",51647.57],["Hau","Accounting",43966.290000000001],["Voronina","Physics",121141.99000000001],["Soisalon-Soininen","Psychology",62579.610000000001],["Moreira","Accounting",71351.419999999998],["Arias","Statistics",104563.38],["Mingoz","Finance",105311.38],["Yazdi","Athletics",98333.649999999994],["Lembr","Accounting",32241.560000000001],["Choll","Statistics",57807.089999999997],["Valtchev","Biology",77036.179999999993],["Arinb","Statistics",54805.110000000001],["Bawa","Athletics",72140.880000000005],["Kenje","Marketing",106554.73],["Vicentino","Elec. Eng.",34272.669999999998],["Dusserre","Marketing",66143.25],["Jaekel","Athletics",103146.87],["Desyl","Languages",48803.379999999997],["DAgostino","Psychology",59706.489999999998],["Sarkar","Pol. Sci.",87549.800000000003],["Ullman ","Accounting",47307.099999999999],["Bancilhon","Pol. Sci.",87958.009999999995],["Liley","Languages",90891.690000000002],["Morris","Marketing",43770.360000000001],["Yin","English",46397.589999999997],["Gustafsson","Elec. Eng.",82534.369999999995],["Bondi","Comp. Sci.",115469.11],["Lent","Mech. Eng.",107978.47],["Pimenta","Cybernetics",79866.949999999997],["Bourrier","Comp. Sci.",80797.830000000002],["Gutierrez","Statistics",45310.529999999999],["Sakurai","English",118143.98],["Romero","Astronomy",79070.080000000002],["Mahmoud","Geology",99382.589999999997],["Kean","English",35023.18],["Bietzk","Cybernetics",117836.5],["Atanassov","Statistics",84982.919999999998],["Tung","Athletics",50482.029999999999],["Wieland","Pol. Sci.",124651.41],["Dale","Cybernetics",93348.830000000002]]},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"table"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"hovermode":"closest","showlegend":false},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"header":{"values":["name","dept_name","salary"],"fill":{"color":"blue"},"font":{"color":"white"}},"cells":{"values":[["McKinnon","Pingr","Mird","Luo","Murata","Konstantinides","Levine","Shuming","Queiroz","Sullivan","Bertolino","Hau","Voronina","Soisalon-Soininen","Moreira","Arias","Mingoz","Yazdi","Lembr","Choll","Valtchev","Arinb","Bawa","Kenje","Vicentino","Dusserre","Jaekel","Desyl","DAgostino","Sarkar","Ullman ","Bancilhon","Liley","Morris","Yin","Gustafsson","Bondi","Lent","Pimenta","Bourrier","Gutierrez","Sakurai","Romero","Mahmoud","Kean","Bietzk","Atanassov","Tung","Wieland","Dale"],["Cybernetics","Statistics","Marketing","English","Athletics","Languages","Elec. Eng.","Physics","Biology","Elec. Eng.","Mech. Eng.","Accounting","Physics","Psychology","Accounting","Statistics","Finance","Athletics","Accounting","Statistics","Biology","Statistics","Athletics","Marketing","Elec. Eng.","Marketing","Athletics","Languages","Psychology","Pol. Sci.","Accounting","Pol. Sci.","Languages","Marketing","English","Elec. Eng.","Comp. Sci.","Mech. Eng.","Cybernetics","Comp. Sci.","Statistics","English","Astronomy","Geology","English","Cybernetics","Statistics","Athletics","Pol. Sci.","Cybernetics"],[94333.990000000005,59303.620000000003,119921.41,88791.449999999997,61387.559999999998,32570.5,89805.830000000002,108011.81,45538.32,90038.089999999997,51647.57,43966.290000000001,121141.99000000001,62579.610000000001,71351.419999999998,104563.38,105311.38,98333.649999999994,32241.560000000001,57807.089999999997,77036.179999999993,54805.110000000001,72140.880000000005,106554.73,34272.669999999998,66143.25,103146.87,48803.379999999997,59706.489999999998,87549.800000000003,47307.099999999999,87958.009999999995,90891.690000000002,43770.360000000001,46397.589999999997,82534.369999999995,115469.11,107978.47,79866.949999999997,80797.830000000002,45310.529999999999,118143.98,79070.080000000002,99382.589999999997,35023.18,117836.5,84982.919999999998,50482.029999999999,124651.41,93348.830000000002]]},"type":"table","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script><div id="extended-projection" class="section level3" number="2.3.1">
<h3>
<span class="header-section-number">2.3.1</span> Extended Projection<a class="anchor" aria-label="anchor" href="#extended-projection"><i class="fas fa-link"></i></a>
</h3>
<p>We can create attributes for a projection by applying operations to attributes. Think of adding a constant to component of every tuple. or finding the difference between two columns as a new column.</p>
<p>For example:</p>
<p><span class="math display">\[
R = \begin{matrix}
A &amp; B \\
\hline
1 &amp; 2 \\
3 &amp; 4
\end{matrix}
\qquad \text{Some relation } R
\\~\\~\\ % ~ is an operartor to add multiple new lines
R2 := \pi_{A+B\rightarrow{C}, A, B}({R}) \qquad \text{Assigning a new relation } R2 \text{ with  columns } A, B, C
\\~\\
C \text{ is a column generating in the projection by the expression } A + B \rightarrow{C}
\\~\\
R2 = \begin{matrix}
A &amp; B &amp; C \\
\hline \\
1 &amp; 2 &amp; 3 \\
3 &amp; 4 &amp; 7 \\
\end{matrix}
\]</span></p>
<p><br></p>
</div>
</div>
<div id="cartesian-products-and-joins" class="section level2" number="2.4">
<h2>
<span class="header-section-number">2.4</span> Cartesian Products and Joins<a class="anchor" aria-label="anchor" href="#cartesian-products-and-joins"><i class="fas fa-link"></i></a>
</h2>
<div id="cartesian-product" class="section level3" number="2.4.1">
<h3>
<span class="header-section-number">2.4.1</span> Cartesian Product<a class="anchor" aria-label="anchor" href="#cartesian-product"><i class="fas fa-link"></i></a>
</h3>
<p>Other names for cartesian product are “product” or “Cross product”. To denote the cartesian product for two relations, we use <span class="math inline">\(\times\)</span></p>
<p>For example:</p>
<p><span class="math display">\[
R3 := R1 \times R2
\\~\\
\text{In English, R3 is assigned to be the cartesian product of } R1 \text{ and } R2
\]</span></p>
<p>Cartesian product simple takes the the attributes in the left hand of <span class="math inline">\(\times\)</span> and concatenates it with the attributes in the right hand of <span class="math inline">\(\times\)</span>. The attributes in the left hand side appear first by convention. If an attribute name appears in both relations, you must rename them. <span class="math inline">\(R3\)</span> has the schema of both <span class="math inline">\(R1\)</span> and <span class="math inline">\(R2\)</span>.</p>
</div>
<div id="natural-joins" class="section level3" number="2.4.2">
<h3>
<span class="header-section-number">2.4.2</span> Natural Joins<a class="anchor" aria-label="anchor" href="#natural-joins"><i class="fas fa-link"></i></a>
</h3>
<p>Natural Joins connect two relations by doing the following:</p>
<ul>
<li>Check which attributes in the schemas for both relations have the same name and domain</li>
<li>For each tuple in one relation, compare the same attributes to the tuples in the other relation</li>
<li>If both tuples have equal values for all shared attributes, concatenate the tuples!
<ul>
<li>If at least one of the shared attributes do is not equal in both tuples, reject the join of those tuples!</li>
<li>Any tuple that cannot join is known as a <strong>dangling tuple</strong>
</li>
</ul>
</li>
<li>Any tuples shared attributes only appear once in the tuples (no duplicate attributes)</li>
</ul>
<p>Natural joins are denoted as <span class="math inline">\(\bowtie\)</span></p>
<p>Lets take the following for an example:</p>
<p>Suppose we have two relations</p>
<p><span class="math display">\[
Sells = \begin{matrix}
bar &amp; beer &amp; price \\
\hline
Joe's &amp; Bud &amp; 2.50 \\
Joe's &amp; Miller &amp; 2.75 \\
Sue's &amp; Bud &amp; 2.50 \\
Sue's &amp; Coors &amp; 3.00
\end{matrix} \qquad Bars = \begin{matrix}
bar &amp; address\\
\hline
Joe's &amp; \text{Maple Street }\\
Sue's &amp; \text{River Road} \\
\end{matrix}
\]</span></p>
<p>Lets join them!</p>
<p><span class="math display">\[
BarInfo := Sells \bowtie Bars
\\
\text{In English: Relation BarInfo is Sells natural join Bars}
\\~\\
BarInfo = \begin{matrix}
bar &amp; beer &amp; price &amp; address \\
\hline \\
Joe's &amp; Bud &amp; 2.50 &amp; \text{Maple Street} \\
Joe's &amp; Miller &amp; 2.75 &amp; \text{Maple Street} \\
Sue's &amp; Bud &amp; 2.50 &amp; \text{River Road} \\
Sue's &amp; Coors &amp; 3.50 &amp; \text{River Road} \\
\end{matrix}
\]</span></p>
</div>
<div id="theta-joins" class="section level3" number="2.4.3">
<h3>
<span class="header-section-number">2.4.3</span> Theta Joins<a class="anchor" aria-label="anchor" href="#theta-joins"><i class="fas fa-link"></i></a>
</h3>
<p>A theta join is a cartesian product with a condition. You simply commit a cartesian product that removes tuples based on some set of conditions. The notation for a theta join is <span class="math inline">\(\sigma_{C}\)</span> where <span class="math inline">\(C\)</span> is the set of conditions. Theta joins are called theta joins because historically, we used <span class="math inline">\(\theta\)</span> instead of <span class="math inline">\(C\)</span> to represent the set of conditions.</p>
<p>For example:</p>
<p><span class="math display">\[
R1 = \begin{matrix}
A &amp; B \\
\hline
1 &amp; 2 \\
3 &amp; 4
\end{matrix} \qquad
R2 = \begin{matrix}
B &amp; C \\
\hline
5 &amp; 6 \\
7 &amp; 8 \\
9 &amp; 10
\end{matrix}
\\~\\~\\
R1 \times R2 = \begin{matrix}
A &amp; R1.B &amp; R2.B &amp; C \\
\hline
1 &amp; 2 &amp; 5 &amp; 6 \\
1 &amp; 2 &amp; 7 &amp; 8 \\
1 &amp; 2 &amp; 9 &amp; 10 \\
3 &amp; 4 &amp; 5 &amp; 6 \\
3 &amp; 4 &amp; 7 &amp; 8 \\
3 &amp; 4 &amp; 9 &amp; 10 \\
\end{matrix}
\\~\\~\\
R5 := R1 \times_{A + C &lt; 10 \text{ and } A &lt; 2} R2
\\~\\
R5 = \begin{matrix}
A &amp; R1.B &amp; R2.B &amp; C \\
\hline
1 &amp; 2 &amp; 5 &amp; 6 \\
1 &amp; 2 &amp; 7 &amp; 8 \\
3 &amp; 4 &amp; 5 &amp; 6
\end{matrix}
\]</span></p>
</div>
<div id="self-joins" class="section level3" number="2.4.4">
<h3>
<span class="header-section-number">2.4.4</span> Self Joins<a class="anchor" aria-label="anchor" href="#self-joins"><i class="fas fa-link"></i></a>
</h3>
<p><strong>PLEASE FIND EXAMPLE OF SELF JOIN IN TEXTBOOK</strong></p>
</div>
</div>
<div id="renaming" class="section level2" number="2.5">
<h2>
<span class="header-section-number">2.5</span> Renaming<a class="anchor" aria-label="anchor" href="#renaming"><i class="fas fa-link"></i></a>
</h2>
<p>The rename operation simply renames relations or its attributes. After renaming a relation, the returned relation retains its tuples, but with different names. The notation for the renaming operation is</p>
<p><span class="math display">\[
\rho_{S(A_{1}, A_{2}, ...A_{n})}{(R)}
\\~\\
S: \text{ The relations new name} \qquad A_{i}: \text{ The new names of the relations attributes}
\\~\\
(R): \text{ The relation you are renaming}
\]</span></p>
<p><strong>Note</strong>:</p>
<ul>
<li>If no attributes are in the subscript, then you are only renaming the relation</li>
<li>If you are renaming at least one attribute, you must list all attributes in the order it appears in the schema with their new names if they are suppose to be renamed and their current names if they are not to be renamed</li>
</ul>
</div>
<div id="complex-expressions" class="section level2" number="2.6">
<h2>
<span class="header-section-number">2.6</span> Complex Expressions<a class="anchor" aria-label="anchor" href="#complex-expressions"><i class="fas fa-link"></i></a>
</h2>
<p>Like in algebra, you can combine expressions to create complex expressions!</p>
<p>There are three ways to express relation arithmetic:</p>
<ol style="list-style-type: decimal">
<li>Sequences of assignment statements</li>
<li>Expressions with multiple operators</li>
<li>Expression Trees</li>
</ol>
<p>In regular algebra, we have an order of precedence of operations (PEMDAS). Likewise, the order of precedence of operations in relational algebra is as follows</p>
<ol style="list-style-type: decimal">
<li>Selection, Projection, Renaming - <span class="math inline">\(\sigma, \pi, \rho\)</span>
</li>
<li>Natural joins/Cartesian Products - <span class="math inline">\(\times, \bowtie\)</span>
</li>
<li>Intersections - <span class="math inline">\(\cap\)</span>
</li>
<li>Unions, Difference <span class="math inline">\(\cup, -\)</span>
</li>
</ol>
<p>We will now explore the different methods of expressing relational arithmetic.</p>
<!-- Continue on slide 31 of relational algebra lecture -->
<div id="sequence-order-of-operations" class="section level3" number="2.6.1">
<h3>
<span class="header-section-number">2.6.1</span> Sequence (Order) of Operations<a class="anchor" aria-label="anchor" href="#sequence-order-of-operations"><i class="fas fa-link"></i></a>
</h3>
<p>We can rewrite the expression <span class="math inline">\(R3 := R1 \bowtie_{C} R2\)</span> as a sequence of small expressions:</p>
<ol style="list-style-type: decimal">
<li><span class="math inline">\(R4 := R1 \times R2 \qquad \text{Commit a cartesian product}\)</span></li>
<li><span class="math inline">\(R3 := \sigma_{C}{(R4)} \qquad \text{Commit a seleciton}\)</span></li>
</ol>
</div>
<div id="expression-trees" class="section level3" number="2.6.2">
<h3>
<span class="header-section-number">2.6.2</span> Expression Trees<a class="anchor" aria-label="anchor" href="#expression-trees"><i class="fas fa-link"></i></a>
</h3>
<p>Using the relations <span class="math inline">\(Bars(name, addr)\)</span> and <span class="math inline">\(Sells(bar, beer, price)\)</span>, find the names of all the
bars that are either on Maple St. or sell Bud for less than $3.</p>
<p>We can express the example expression as a tree where each leaf node is a relation and each parent node is an operation. The head of the tree is the new relation!</p>
<div class="inline-figure"><img src="images/expressionTree.png" style="width:100.0%"></div>
<p>We can see in the left hand side of the tree that our relation (leaf node) is <span class="math inline">\(Bars\)</span>, we then do a selection. Finally we do a projection! The right hand side does the same. As we traverse the tree, we finally join both sides with a union</p>
</div>
<div id="schemas-for-results" class="section level3" number="2.6.3">
<h3>
<span class="header-section-number">2.6.3</span> Schemas for Results<a class="anchor" aria-label="anchor" href="#schemas-for-results"><i class="fas fa-link"></i></a>
</h3>
<p>How do relations created by relational algebra affect their schemas?</p>
<ul>
<li>
<strong>Union, intersection, difference</strong>: The schemas of two oprands must be identical, therefore that schema becomes the schema for the result</li>
<li>
<strong>Selection</strong>: The schema of the result is the same as the schema of the operand</li>
<li>
<strong>Projection</strong>: The chosen attributes become the schema</li>
<li>
<strong>Cartesian Product</strong>: The schema is the attributes of both relations in the product (Use <strong>RelationName</strong>.attribute) for common attributes</li>
<li>
<strong>Thea Join</strong>: The schema is the attributes of both relations in the product (Use <strong>RelationName</strong>.attribute) for common attributes</li>
<li>
<strong>Natural Join</strong>: The union of the two attributes of the relation with no repeats in shared attributes.</li>
<li>
<strong>Renaming</strong>: the operator tells the schema</li>
</ul>
<p><br></p>
</div>
</div>
<div id="relational-algebra-on-bags" class="section level2" number="2.7">
<h2>
<span class="header-section-number">2.7</span> Relational Algebra on Bags<a class="anchor" aria-label="anchor" href="#relational-algebra-on-bags"><i class="fas fa-link"></i></a>
</h2>
<p>A <strong>bag</strong> is a set with duplicate values The normal mathematical sets are a special case of bags where all elements in the bag are</p>
<div id="operations-on-bags" class="section level3" number="2.7.1">
<h3>
<span class="header-section-number">2.7.1</span> Operations on Bags<a class="anchor" aria-label="anchor" href="#operations-on-bags"><i class="fas fa-link"></i></a>
</h3>
<p><strong>Selection</strong>: Selection chooses tuples, so it works exactly like selection in sets</p>
<p><strong>Projection</strong>: Like projection of sets, chosen attributes become the schema, but duplications are not removed</p>
<p><strong>Cartesian Product/joins</strong>: This is the same as regular sets, however duplicates are not removed</p>
<p><strong>Bag Union</strong>: In the union of bags, duplicates are not removed</p>
<p><strong>Bag Intersection</strong>: In the intersection of bags, duplicates are not removed</p>
<p><strong>Bag Difference</strong>: The elements that appear in a difference of bags <span class="math inline">\(A - B\)</span> is the the same as sets, but you treat each element (even if they are duplicates) as its own entity</p>
<!--- Look up PC example!--->

</div>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="relational-databases.html"><span class="header-section-number">1</span> Relational Databases</a></div>
<div class="next"><a href="introducion-to-sql.html"><span class="header-section-number">3</span> Introducion to SQL</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#relational-algebra"><span class="header-section-number">2</span> Relational Algebra</a></li>
<li><a class="nav-link" href="#algebraic-query-language"><span class="header-section-number">2.1</span> Algebraic Query Language</a></li>
<li><a class="nav-link" href="#selection"><span class="header-section-number">2.2</span> Selection</a></li>
<li>
<a class="nav-link" href="#projection"><span class="header-section-number">2.3</span> Projection</a><ul class="nav navbar-nav"><li><a class="nav-link" href="#extended-projection"><span class="header-section-number">2.3.1</span> Extended Projection</a></li></ul>
</li>
<li>
<a class="nav-link" href="#cartesian-products-and-joins"><span class="header-section-number">2.4</span> Cartesian Products and Joins</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#cartesian-product"><span class="header-section-number">2.4.1</span> Cartesian Product</a></li>
<li><a class="nav-link" href="#natural-joins"><span class="header-section-number">2.4.2</span> Natural Joins</a></li>
<li><a class="nav-link" href="#theta-joins"><span class="header-section-number">2.4.3</span> Theta Joins</a></li>
<li><a class="nav-link" href="#self-joins"><span class="header-section-number">2.4.4</span> Self Joins</a></li>
</ul>
</li>
<li><a class="nav-link" href="#renaming"><span class="header-section-number">2.5</span> Renaming</a></li>
<li>
<a class="nav-link" href="#complex-expressions"><span class="header-section-number">2.6</span> Complex Expressions</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#sequence-order-of-operations"><span class="header-section-number">2.6.1</span> Sequence (Order) of Operations</a></li>
<li><a class="nav-link" href="#expression-trees"><span class="header-section-number">2.6.2</span> Expression Trees</a></li>
<li><a class="nav-link" href="#schemas-for-results"><span class="header-section-number">2.6.3</span> Schemas for Results</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#relational-algebra-on-bags"><span class="header-section-number">2.7</span> Relational Algebra on Bags</a><ul class="nav navbar-nav"><li><a class="nav-link" href="#operations-on-bags"><span class="header-section-number">2.7.1</span> Operations on Bags</a></li></ul>
</li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>CSE 560 - Notes</strong>" was written by Jason Caballes. </p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
